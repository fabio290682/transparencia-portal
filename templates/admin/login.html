{% extends "admin/base_site.html" %}
{% load i18n static %}

{% block title %}Login - Instituto Meio do Mundo{% endblock %}
{% block bodyclass %}login{% endblock %}

{% block extrastyle %}
{{ block.super }}
<link rel="stylesheet" href="{% static 'css/admin-login.css' %}">
{% endblock %}

{% block content %}
<div class="login-container">
    <div class="login-header">
        <img class="logo-image" src="{% static 'img/logo-portal.svg' %}" alt="Instituto Meio do Mundo">
    </div>

    <div class="login-body">
        <h2>Painel Administrativo</h2>

        {% if form.errors %}
        <div class="form-error">Usuário ou senha inválidos.</div>
        {% endif %}

        {% if user.is_authenticated %}
        <div class="form-error">Você já está autenticado, mas sem permissão para esta área.</div>
        {% endif %}

        <form method="post" action="{{ app_path }}">
            {% csrf_token %}

            <div class="input-group">
                <input
                    type="text"
                    name="username"
                    id="id_username"
                    placeholder="Nome de usuário"
                    value="{{ form.username.value|default_if_none:'' }}"
                    required
                    autofocus
                    autocomplete="username">
            </div>

            <div class="input-group">
                <input
                    type="password"
                    name="password"
                    id="id_password"
                    placeholder="Senha"
                    required
                    autocomplete="current-password">
            </div>

            <button type="submit" class="btn-access">Acessar Sistema</button>
            <input type="hidden" name="next" value="{{ next }}">
        </form>

        {% if password_reset_url %}
        <a href="{{ password_reset_url }}" class="forgot-password">Esqueceu a senha?</a>
        {% endif %}
    </div>
</div>
{% endblock %}

